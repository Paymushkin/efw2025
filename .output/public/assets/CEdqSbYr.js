import{_ as O,E as H,f,j as R,g as $,c as m,e as C,o as p,a as o,t as v,i as G,C as x,d as I,G as _,H as q,A as V,n as U,I as W,k as F,x as j,h as Y,F as X,r as z}from"./BtRrMkWq.js";import{u as K}from"./CQRAuVp_.js";import{s as Q}from"./x_rD_Ya3.js";const Z={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},J={class:"bg-white p-6 rounded-lg max-w-md w-full mx-4"},ee={key:0,class:"mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},te={key:1,class:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},ae={class:"mt-1 text-xs text-gray-500"},se={key:0},oe={key:0,class:"mt-1 text-sm text-red-500"},ne={class:"space-y-3"},re={class:"flex items-start gap-3 cursor-pointer"},le={class:"flex items-start gap-3 cursor-pointer"},ie=["disabled"],ce={__name:"WaitlistForm",props:{isOpen:Boolean},emits:["close","success"],setup(B,{emit:L}){const k=L,e=H({companyName:"",industry:"",customIndustry:"",name:"",email:"",phone:"",message:"",agreement1:!1,agreement2:!1}),g=f(""),y=f(!1),c=f(!1),w=f(!1),h=f(!1),N=f("");R(()=>{if(typeof window>"u")return!1;try{return!window.location.hostname.includes("localhost")&&!window.location.hostname.includes("127.0.0.1")&&!window.location.hostname.includes("0.0.0.0")}catch{return!1}}),R(()=>{if(typeof window>"u")return!1;try{return window.location.hostname==="emiratesfashionweeks.com"}catch{return!1}});const T=R(()=>e.companyName.trim()?e.companyName.trim().split(" ").map(s=>{if(s.length<=2)return s;const l=s[0],d=s[s.length-1],u="*".repeat(s.length-2);return l+u+d}).join(" "):"B**** ***n LLC"),S=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),A=a=>{if(!a||a.length<=2)return a;const t=a.split(" ");if(t.length===1){const s=t[0];return s.length<5?s.substring(0,2)+"*".repeat(s.length-2):s.substring(0,2)+"*".repeat(s.length-5)+s.substring(s.length-3)}else return t.map((l,d)=>d===0?l.substring(0,2)+"*".repeat(l.length-2):d===t.length-1&&l.length===3?l:"*".repeat(l.length)).join(" ")},E=a=>{console.log("reCAPTCHA success, token:",a),h.value=!0},D=()=>{if(console.log("Loading reCAPTCHA v3..."),!(typeof window>"u"))if(window.grecaptcha)console.log("reCAPTCHA already loaded, executing..."),window.grecaptcha.ready(()=>{console.log("reCAPTCHA ready (already loaded), executing...");try{window.grecaptcha.execute("6Le9rMYrAAAAAHyXSxhlpMSqCfXlxRDz69h_dldu",{action:"submit"}).then(a=>{console.log("reCAPTCHA executed (already loaded), token received"),E(a)}).catch(a=>{console.error("reCAPTCHA execute error (already loaded):",a)})}catch(a){console.error("reCAPTCHA v3 error (already loaded):",a)}});else{console.log("reCAPTCHA not loaded, loading script...");const a=document.createElement("script");a.src="https://www.google.com/recaptcha/api.js?render=6Le9rMYrAAAAAHyXSxhlpMSqCfXlxRDz69h_dldu",a.async=!0,a.defer=!0,document.head.appendChild(a),a.onload=()=>{console.log("reCAPTCHA script loaded"),window.grecaptcha&&window.grecaptcha.ready(()=>{console.log("reCAPTCHA ready, executing...");try{window.grecaptcha.execute("6Le9rMYrAAAAAHyXSxhlpMSqCfXlxRDz69h_dldu",{action:"submit"}).then(t=>{console.log("reCAPTCHA executed, token received"),E(t)}).catch(t=>{console.error("reCAPTCHA execute error:",t)})}catch(t){console.error("reCAPTCHA v3 error:",t)}})}}},b=()=>{e.industry!=="other"&&(e.customIndustry="")},r=()=>{if(c.value){k("close"),c.value=!1;return}if(k("close"),e.companyName="",e.industry="",e.customIndustry="",e.name="",e.email="",e.phone="",e.message="",e.agreement1=!1,e.agreement2=!1,g.value="",c.value=!1,w.value=!1,h.value=!1,typeof window<"u"&&window.grecaptcha){const a=document.getElementById("recaptcha-container");a&&(a.innerHTML="",F(()=>{D()}))}},n=async()=>{if(g.value="",!!e.companyName.trim()&&e.industry&&!(e.industry==="other"&&!e.customIndustry.trim())&&!(!e.agreement1||!e.agreement2)){if(!e.email.trim()){g.value="Email is required";return}if(!S(e.email)){g.value="Please enter a valid email address";return}y.value=!0;try{const a=e.industry==="other"?e.customIndustry:e.industry,t=window.location.hostname.includes("localhost")||window.location.hostname.includes("127.0.0.1")||window.location.hostname.includes("0.0.0.0");console.log("Form submission - isLocal:",t),console.log("Form submission - hostname:",window.location.hostname);let s;if(t)console.log("Using local API endpoint"),s=await fetch("/api/waitlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companyName:e.companyName,industry:a,name:e.name,email:e.email,phone:e.phone,message:e.message,agreement1:e.agreement1,agreement2:e.agreement2})});else{console.log("Using Google Apps Script endpoint");const u="https://script.google.com/macros/s/AKfycbxUuh8iEc5YE8k2q5e36DE66OpYPetpEOA0YdpQm0QwRXqqEcBDPcU5xP0RZI71R-bsbA/exec",i=new URLSearchParams;i.append("action","submit"),i.append("companyName",e.companyName),i.append("industry",a),i.append("name",e.name),i.append("email",e.email),i.append("phone",e.phone),i.append("message",e.message),i.append("agreement1",e.agreement1.toString()),i.append("agreement2",e.agreement2.toString()),i.append("timestamp",new Date().toISOString()),i.append("source","Waitlist Form"),i.append("status","WAITLIST");const P=new Image,M=`${u}?${i.toString()}`;console.log("Sending to Google Apps Script:",M),P.src=M,P.onload=()=>{console.log("Image loaded successfully - data sent to Google Sheets")},P.onerror=()=>{console.log("Image failed to load - possible error sending data")},s={ok:!0,status:200}}if(t&&!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const l=A(e.companyName);N.value=`${l} has been successfully added to the waitlist!`,c.value=!0;const d={companyName:e.companyName,industry:a,timestamp:new Date().toISOString()};k("success",d),e.companyName="",e.industry="",e.customIndustry="",e.name="",e.email="",e.phone="",e.message="",e.agreement1=!1,e.agreement2=!1,setTimeout(()=>{c.value=!1,k("close")},3e3)}catch(a){console.error("Error adding to waitlist:",a),w.value=!0,setTimeout(()=>{w.value=!1},3e3)}finally{y.value=!1}}};return $(()=>{h.value=!0}),(a,t)=>B.isOpen?(p(),m("div",Z,[o("div",J,[o("div",{class:"flex justify-between items-center mb-6"},[t[8]||(t[8]=o("h3",{class:"text-xl font-semibold"},"Join Waitlist",-1)),o("button",{onClick:r,class:"text-gray-500 hover:text-gray-700 text-2xl leading-none"}," × ")]),c.value?(p(),m("div",ee,[o("p",null,v(N.value),1)])):C("",!0),w.value?(p(),m("div",te,t[9]||(t[9]=[o("p",null,"An error occurred while adding you to the waitlist. Please try again later.",-1)]))):C("",!0),c.value?C("",!0):(p(),m("form",{key:2,onSubmit:G(n,["prevent"]),class:"space-y-4"},[o("div",null,[t[10]||(t[10]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[I("Company Name "),o("span",{class:"text-red-500"},"*")],-1)),x(o("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.companyName=s),type:"text",required:"",placeholder:"Beauty Salon LLC",class:"w-full text-black px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black placeholder:text-gray-400"},null,512),[[_,e.companyName]]),o("p",ae," Your application will be displayed in the waitlist as "+v(T.value)+" / "+v(e.industry||"Sector"),1)]),o("div",null,[t[12]||(t[12]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[I("Industry / Sector "),o("span",{class:"text-red-500"},"*")],-1)),x(o("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>e.industry=s),onChange:b,class:"w-full text-black px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black"},t[11]||(t[11]=[V('<option value="" disabled style="color:#9ca3af;" data-v-5e5d4a8a>Select your industry</option><option value="Medical &amp; Aesthetic Clinics" data-v-5e5d4a8a>Medical &amp; Aesthetic Clinics</option><option value="Health &amp; Wellness Tourism / Nutrition" data-v-5e5d4a8a>Health &amp; Wellness Tourism / Nutrition</option><option value="Beauty &amp; Cosmetics Brands" data-v-5e5d4a8a>Beauty &amp; Cosmetics Brands</option><option value="Makeup Artists / Nails / Brows / Lashes" data-v-5e5d4a8a>Makeup Artists / Nails / Brows / Lashes</option><option value="Salons, Spas &amp; Massage Studios" data-v-5e5d4a8a>Salons, Spas &amp; Massage Studios</option><option value="Barbershops &amp; Grooming Services" data-v-5e5d4a8a>Barbershops &amp; Grooming Services</option><option value="Gyms &amp; Fitness / Wellness Studios" data-v-5e5d4a8a>Gyms &amp; Fitness / Wellness Studios</option><option value="Bridal &amp; Wedding Beauty Services" data-v-5e5d4a8a>Bridal &amp; Wedding Beauty Services</option><option value="Makeup &amp; Cosmetology Schools / Courses" data-v-5e5d4a8a>Makeup &amp; Cosmetology Schools / Courses</option><option value="Beauty Tech (CRM, Booking, Payments)" data-v-5e5d4a8a>Beauty Tech (CRM, Booking, Payments)</option><option value="Salon &amp; Clinic Equipment Suppliers" data-v-5e5d4a8a>Salon &amp; Clinic Equipment Suppliers</option><option value="other" data-v-5e5d4a8a>Other</option>',13)]),544),[[q,e.industry]])]),e.industry==="other"?(p(),m("div",se,[t[13]||(t[13]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Specify Industry",-1)),x(o("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.customIndustry=s),type:"text",required:"",placeholder:"Specify your industry",class:"w-full text-black px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black placeholder:text-gray-400"},null,512),[[_,e.customIndustry]])])):C("",!0),o("div",null,[t[14]||(t[14]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[I("Email "),o("span",{class:"text-red-500"},"*")],-1)),x(o("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>e.email=s),type:"email",required:"",placeholder:"mail@company.com",class:U(["w-full px-3 py-2 text-black border rounded-md focus:outline-none focus:ring-2 focus:ring-black placeholder:text-gray-400",g.value?"border-red-500":"border-gray-300"])},null,2),[[_,e.email]]),g.value?(p(),m("p",oe,v(g.value),1)):C("",!0)]),o("div",null,[t[15]||(t[15]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Whatsapp/Phone",-1)),x(o("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>e.phone=s),type:"tel",placeholder:"+971000000000",class:"w-full text-black px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black placeholder:text-gray-400"},null,512),[[_,e.phone]])]),o("div",null,[t[16]||(t[16]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Referral Source & Comments to Organizers",-1)),x(o("textarea",{"onUpdate:modelValue":t[5]||(t[5]=s=>e.message=s),rows:"3",class:"w-full text-black px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black placeholder:text-gray-400",placeholder:"How did you hear about us? Any additional comments..."},null,512),[[_,e.message]])]),o("div",ne,[o("label",re,[x(o("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>e.agreement1=s),type:"checkbox",required:"",class:"mt-1 w-4 h-4 text-black bg-black border-black rounded focus:ring-black focus:ring-2"},null,512),[[W,e.agreement1]]),t[17]||(t[17]=o("span",{class:"text-sm text-gray-700"},[o("span",{class:"text-red-500"},"*"),I(" I understand that trial spots are limited and subsidized. Placement on the waitlist does not guarantee participation, and allocation will depend on availability. ")],-1))]),o("label",le,[x(o("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>e.agreement2=s),type:"checkbox",required:"",class:"mt-1 w-4 h-4 text-black bg-black border-black rounded focus:ring-black focus:ring-2"},null,512),[[W,e.agreement2]]),t[18]||(t[18]=o("span",{class:"text-sm text-gray-700"},[o("span",{class:"text-red-500"},"*"),I(" I agree that the EFW team may use my contact details to notify me about updates and opportunities. ")],-1))])]),o("button",{type:"submit",disabled:y.value||!e.companyName.trim()||!e.industry||!e.email.trim()||!e.agreement1||!e.agreement2,class:"w-full bg-black text-white py-2 rounded-md hover:bg-opacity-90 transition-colors disabled:bg-gray-400"},v(y.value?"Adding to Waitlist...":"Join"),9,ie)],32))])])):C("",!0)}},Ne=O(ce,[["__scopeId","data-v-5e5d4a8a"]]),de={class:"companies-list"},ue={key:0,class:"text-center py-8"},me={key:1,class:"text-center py-8"},pe={class:"text-red-600"},ge={key:2,class:"text-center py-8"},ye={key:3,class:"space-y-3"},he={class:"text-lg font-semibold mb-4"},fe={class:"space-y-3 pr-2"},ve={class:"flex items-center gap-3 flex-1"},be={class:"flex-shrink-0 w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center text-xs font-medium text-gray-600"},we={class:"flex-1"},xe={class:"flex items-center gap-2"},Ce={class:"font-medium text-gray-900"},ke={key:0,class:"px-2 py-1 text-xs font-semibold text-green-700 bg-green-100 rounded-full"},Se={__name:"CompaniesList",emits:["companies-count-updated"],setup(B,{expose:L,emit:k}){const e=f([]),g=f(!0),y=f(""),c=f(null),w=f(null),{updateTrialWaitlistCount:h}=K(),N=r=>{if(!r||r.length<=2)return r;const n=r.split(" ");if(n.length===1){const a=n[0];return a.length<5?a.substring(0,2)+"*".repeat(a.length-2):a.substring(0,2)+"*".repeat(a.length-5)+a.substring(a.length-3)}else return n.map((t,s)=>s===0?t.substring(0,2)+"*".repeat(t.length-2):s===n.length-1&&t.length===3?t:"*".repeat(t.length)).join(" ")},T=r=>c.value?r.companyName+"_"+r.timestamp===c.value:!1,S=r=>{console.log("CompaniesList: filtering companies:",r.length),console.log("CompaniesList: all companies with statuses:",r.map(a=>({name:a.companyName,status:a.status})));const n=r.filter(a=>!a.status||a.status===""||a.status==="WAITLIST"||a.status==="waitlist");return console.log("CompaniesList: waitlist companies:",n.length),console.log("CompaniesList: waitlist companies details:",n.map(a=>({name:a.companyName,status:a.status}))),n},A=async()=>{try{if(g.value=!0,y.value="",window.location.hostname.includes("localhost")||window.location.hostname.includes("127.0.0.1")||window.location.hostname.includes("0.0.0.0")){try{const n=await $fetch("/api/companies-list",{query:{_t:Date.now()}});if(n.success){const t=S(n.companies).sort((s,l)=>new Date(l.timestamp)-new Date(s.timestamp));if(c.value){const s=e.value.findIndex(l=>l.companyName+"_"+l.timestamp===c.value);if(s!==-1){const l=e.value.splice(s,1)[0];t.unshift(l)}}e.value=t,b("companies-count-updated",e.value.length),h(e.value.length)}else y.value=n.error||"Ошибка загрузки данных"}catch(n){console.error("API Error:",n),e.value=[],b("companies-count-updated",0),h(0),y.value="Сервис временно недоступен"}g.value=!1}else{const n="https://script.google.com/macros/s/AKfycbxUuh8iEc5YE8k2q5e36DE66OpYPetpEOA0YdpQm0QwRXqqEcBDPcU5xP0RZI71R-bsbA/exec",a="callback_companies_"+Date.now();window[a]=s=>{if(s&&s.success){const d=S(s.companies).sort((u,i)=>new Date(i.timestamp)-new Date(u.timestamp));if(c.value){const u=e.value.findIndex(i=>i.companyName+"_"+i.timestamp===c.value);if(u!==-1){const i=e.value.splice(u,1)[0];d.unshift(i)}}e.value=d,b("companies-count-updated",e.value.length),h(e.value.length)}else{console.log("Google Apps Script error, using test data");const l=[{companyName:"Test Company 1",industry:"Fashion",timestamp:new Date().toISOString(),status:"waitlist"},{companyName:"Test Company 2",industry:"Beauty",timestamp:new Date(Date.now()-864e5).toISOString(),status:"waitlist"}];e.value=l,b("companies-count-updated",l.length),h(l.length)}g.value=!1,delete window[a],document.head.removeChild(t)};const t=document.createElement("script");t.src=`${n}?action=getCompanies&callback=${a}&_t=${Date.now()}`,document.head.appendChild(t)}}catch(r){console.error("Error fetching companies:",r),y.value="Ошибка загрузки данных",g.value=!1}},E=async()=>{try{const r="https://script.google.com/macros/s/AKfycbwXeRReRGMr-ud3ZjY2btAGZkagSKRe0pXvCfLiC8K4mGSNfrIiQ6jOtw_c4h5uPzAiSw/exec",n="callback_companies_auto_"+Date.now();window[n]=t=>{if(t&&t.success){const l=S(t.companies).sort((d,u)=>new Date(u.timestamp)-new Date(d.timestamp));if(c.value){const d=e.value.findIndex(u=>u.companyName+"_"+u.timestamp===c.value);if(d!==-1){const u=e.value.splice(d,1)[0];l.unshift(u)}}e.value=l,b("companies-count-updated",e.value.length),h(e.value.length)}else{console.log("Google Apps Script error in autoRefresh, using test data");const s=[{companyName:"Test Company 1",industry:"Fashion",timestamp:new Date().toISOString(),status:"waitlist"},{companyName:"Test Company 2",industry:"Beauty",timestamp:new Date(Date.now()-864e5).toISOString(),status:"waitlist"}];e.value=s,b("companies-count-updated",s.length),h(s.length)}delete window[n],document.head.removeChild(a)};const a=document.createElement("script");a.src=`${r}?action=getCompanies&callback=${n}&_t=${Date.now()}`,document.head.appendChild(a)}catch(r){console.error("Error during auto refresh:",r)}};L({refresh:async(r=null)=>{if(r){const n=r.companyName+"_"+r.timestamp;c.value=n,e.value.unshift(r)}await A()},fetchCompanies:A});const b=k;return j(e,r=>{b("companies-count-updated",r.length),h(r.length)},{immediate:!0}),$(()=>{A(),w.value=Q(()=>{E()},6e4)}),Y(()=>{w.value&&clearInterval(w.value)}),(r,n)=>(p(),m("div",de,[g.value?(p(),m("div",ue,n[0]||(n[0]=[o("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-black"},null,-1)]))):y.value?(p(),m("div",me,[o("p",pe,"Ошибка загрузки: "+v(y.value),1)])):e.value.length===0?(p(),m("div",ge,n[1]||(n[1]=[o("p",{class:"text-gray-600"},"Пока нет зарегистрированных компаний",-1)]))):(p(),m("div",ye,[o("h3",he,"WAITLIST APPLICATIONS SUBMITTED ("+v(e.value.length)+")",1),o("div",fe,[(p(!0),m(X,null,z(e.value,(a,t)=>(p(),m("div",{key:t,class:U(["flex items-center justify-between p-3 rounded-lg border transition-all duration-300",T(a)?"bg-green-50 border-green-200 shadow-md":"bg-gray-50 border-gray-200"])},[o("div",ve,[o("div",be,v(t+1),1),o("div",we,[o("div",xe,[o("div",Ce,v(N(a.companyName))+v(a.industry?" | "+a.industry:""),1),T(a)?(p(),m("span",ke," NEW ")):C("",!0),n[2]||(n[2]=o("span",{class:"px-2 py-1 text-xs font-semibold text-orange-700 bg-orange-100 rounded-full"}," WAITLIST ",-1))])])])],2))),128))])]))]))}},Te=O(Se,[["__scopeId","data-v-96c98fa0"]]),Ee=""+new URL("trial.DE43NbE_.webp",import.meta.url).href,Pe=""+new URL("trial_compare.CSoTNs-R.webp",import.meta.url).href;export{Te as C,Ee as I,Ne as W,Pe as a};
