import{P as q,r as h,Q as Y,g as V,e as J,c as g,H as N,o as f,a as o,t as v,C as Q,J as A,d as L,R as P,S as K,B as Z,D as F,T as z,v as ee,n as te,l as se,F as ae,f as oe}from"./BMoxR-sk.js";import{_ as X}from"./DlAUqK2U.js";import{s as ne}from"./x_rD_Ya3.js";const $=h(0),G=h(0),re=()=>{const M=m=>{$.value=m},D=m=>{G.value=m},C=()=>$.value,e=()=>G.value;return{companiesCount:q($),trialWaitlistCount:q(G),updateCompaniesCount:M,updateTrialWaitlistCount:D,getCompaniesCount:C,getTrialWaitlistCount:e}},le={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ie={class:"bg-white p-6 rounded-lg max-w-md w-full mx-4"},ue={key:0,class:"mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},ce={key:1,class:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},de={class:"mt-1 text-xs text-gray-500"},me={key:0},pe={key:0,class:"mt-1 text-sm text-red-500"},ge={class:"space-y-3"},fe={class:"flex items-start gap-3 cursor-pointer"},he={class:"flex items-start gap-3 cursor-pointer"},ye=["disabled"],ve={__name:"WaitlistForm",props:{isOpen:Boolean},emits:["close","success"],setup(M,{emit:D}){const C=D,e=Y({companyName:"",industry:"",customIndustry:"",name:"",email:"",phone:"",message:"",agreement1:!1,agreement2:!1}),m=h(""),y=h(!1),u=h(!1),w=h(!1),x=h(!1),W=h("");V(()=>{if(typeof window>"u")return!1;try{return!window.location.hostname.includes("localhost")&&!window.location.hostname.includes("127.0.0.1")&&!window.location.hostname.includes("0.0.0.0")}catch{return!1}}),V(()=>{if(typeof window>"u")return!1;try{return window.location.hostname==="emiratesfashionweeks.com"}catch{return!1}});const B=V(()=>e.companyName.trim()?e.companyName.trim().split(" ").map(a=>{if(a.length<=2)return a;const i=a[0],p=a[a.length-1],k="*".repeat(a.length-2);return i+k+p}).join(" "):"B**** ***n LLC"),U=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),R=s=>{if(!s||s.length<=2)return s;const t=s.split(" ");if(t.length===1){const a=t[0];return a.length<5?a.substring(0,2)+"*".repeat(a.length-2):a.substring(0,2)+"*".repeat(a.length-5)+a.substring(a.length-3)}else return t.map((i,p)=>p===0?i.substring(0,2)+"*".repeat(i.length-2):p===t.length-1&&i.length===3?i:"*".repeat(i.length)).join(" ")},_=s=>{console.log("reCAPTCHA success, token:",s),x.value=!0},H=()=>{if(console.log("Loading reCAPTCHA v3..."),!(typeof window>"u"))if(window.grecaptcha)console.log("reCAPTCHA already loaded, executing..."),window.grecaptcha.ready(()=>{console.log("reCAPTCHA ready (already loaded), executing...");try{window.grecaptcha.execute("6Le9rMYrAAAAAHyXSxhlpMSqCfXlxRDz69h_dldu",{action:"submit"}).then(s=>{console.log("reCAPTCHA executed (already loaded), token received"),_(s)}).catch(s=>{console.error("reCAPTCHA execute error (already loaded):",s)})}catch(s){console.error("reCAPTCHA v3 error (already loaded):",s)}});else{console.log("reCAPTCHA not loaded, loading script...");const s=document.createElement("script");s.src="https://www.google.com/recaptcha/api.js?render=6Le9rMYrAAAAAHyXSxhlpMSqCfXlxRDz69h_dldu",s.async=!0,s.defer=!0,document.head.appendChild(s),s.onload=()=>{console.log("reCAPTCHA script loaded"),window.grecaptcha&&window.grecaptcha.ready(()=>{console.log("reCAPTCHA ready, executing...");try{window.grecaptcha.execute("6Le9rMYrAAAAAHyXSxhlpMSqCfXlxRDz69h_dldu",{action:"submit"}).then(t=>{console.log("reCAPTCHA executed, token received"),_(t)}).catch(t=>{console.error("reCAPTCHA execute error:",t)})}catch(t){console.error("reCAPTCHA v3 error:",t)}})}}},j=()=>{e.industry!=="other"&&(e.customIndustry="")},S=()=>{if(u.value){C("close"),u.value=!1;return}if(C("close"),e.companyName="",e.industry="",e.customIndustry="",e.name="",e.email="",e.phone="",e.message="",e.agreement1=!1,e.agreement2=!1,m.value="",u.value=!1,w.value=!1,x.value=!1,typeof window<"u"&&window.grecaptcha){const s=document.getElementById("recaptcha-container");s&&(s.innerHTML="",ee(()=>{H()}))}},l=async()=>{if(m.value="",!!e.companyName.trim()&&e.industry&&!(e.industry==="other"&&!e.customIndustry.trim())&&!(!e.agreement1||!e.agreement2)){if(e.email.trim()&&!U(e.email)){m.value="Please enter a valid email address";return}y.value=!0;try{const s=e.industry==="other"?e.customIndustry:e.industry,t=window.location.hostname.includes("localhost")||window.location.hostname.includes("127.0.0.1")||window.location.hostname.includes("0.0.0.0");console.log("Form submission - isLocal:",t),console.log("Form submission - hostname:",window.location.hostname);let a;if(t)console.log("Using local API endpoint"),a=await fetch("/api/waitlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companyName:e.companyName,industry:s,name:e.name,email:e.email,phone:e.phone,message:e.message,agreement1:e.agreement1,agreement2:e.agreement2})});else{console.log("Using Google Apps Script endpoint");const k="https://script.google.com/macros/s/AKfycbxUuh8iEc5YE8k2q5e36DE66OpYPetpEOA0YdpQm0QwRXqqEcBDPcU5xP0RZI71R-bsbA/exec",c=new URLSearchParams;c.append("action","submit"),c.append("companyName",e.companyName),c.append("industry",s),c.append("name",e.name),c.append("email",e.email),c.append("phone",e.phone),c.append("message",e.message),c.append("agreement1",e.agreement1.toString()),c.append("agreement2",e.agreement2.toString()),c.append("timestamp",new Date().toISOString()),c.append("source","Waitlist Form"),c.append("status","WAITLIST");const E=new Image,r=`${k}?${c.toString()}`;console.log("Sending to Google Apps Script:",r),E.src=r,E.onload=()=>{console.log("Image loaded successfully - data sent to Google Sheets")},E.onerror=()=>{console.log("Image failed to load - possible error sending data")},a={ok:!0,status:200}}if(t&&!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const i=R(e.companyName);W.value=`${i} has been successfully added to the waitlist!`,u.value=!0;const p={companyName:e.companyName,industry:s,timestamp:new Date().toISOString()};C("success",p),e.companyName="",e.industry="",e.customIndustry="",e.name="",e.email="",e.phone="",e.message="",e.agreement1=!1,e.agreement2=!1,setTimeout(()=>{u.value=!1,C("close")},5e3)}catch(s){console.error("Error adding to waitlist:",s),w.value=!0,setTimeout(()=>{w.value=!1},5e3)}finally{y.value=!1}}};return J(()=>{x.value=!0}),(s,t)=>M.isOpen?(f(),g("div",le,[o("div",ie,[o("div",{class:"flex justify-between items-center mb-6"},[t[8]||(t[8]=o("h3",{class:"text-xl font-semibold"},"Join Waitlist",-1)),o("button",{onClick:S,class:"text-gray-500 hover:text-gray-700 text-2xl leading-none"}," × ")]),u.value?(f(),g("div",ue,[o("p",null,v(W.value),1)])):N("",!0),w.value?(f(),g("div",ce,t[9]||(t[9]=[o("p",null,"An error occurred while adding you to the waitlist. Please try again later.",-1)]))):N("",!0),u.value?N("",!0):(f(),g("form",{key:2,onSubmit:Q(l,["prevent"]),class:"space-y-4"},[o("div",null,[t[10]||(t[10]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[L("Company Name "),o("span",{class:"text-red-500"},"*")],-1)),A(o("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.companyName=a),type:"text",required:"",placeholder:"Beauty Salon LLC",class:"w-full text-black px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black placeholder:text-gray-400"},null,512),[[P,e.companyName]]),o("p",de," Your application will be displayed in the waitlist as "+v(B.value)+" / "+v(e.industry||"Sector"),1)]),o("div",null,[t[12]||(t[12]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[L("Industry / Sector "),o("span",{class:"text-red-500"},"*")],-1)),A(o("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.industry=a),onChange:j,class:"w-full text-black px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black"},t[11]||(t[11]=[Z('<option value="" disabled style="color:#9ca3af;" data-v-662ad707>Select your industry</option><option value="Medical &amp; Aesthetic Clinics" data-v-662ad707>Medical &amp; Aesthetic Clinics</option><option value="Health &amp; Wellness Tourism / Nutrition" data-v-662ad707>Health &amp; Wellness Tourism / Nutrition</option><option value="Beauty &amp; Cosmetics Brands" data-v-662ad707>Beauty &amp; Cosmetics Brands</option><option value="Makeup Artists / Nails / Brows / Lashes" data-v-662ad707>Makeup Artists / Nails / Brows / Lashes</option><option value="Salons, Spas &amp; Massage Studios" data-v-662ad707>Salons, Spas &amp; Massage Studios</option><option value="Barbershops &amp; Grooming Services" data-v-662ad707>Barbershops &amp; Grooming Services</option><option value="Gyms &amp; Fitness / Wellness Studios" data-v-662ad707>Gyms &amp; Fitness / Wellness Studios</option><option value="Bridal &amp; Wedding Beauty Services" data-v-662ad707>Bridal &amp; Wedding Beauty Services</option><option value="Makeup &amp; Cosmetology Schools / Courses" data-v-662ad707>Makeup &amp; Cosmetology Schools / Courses</option><option value="Beauty Tech (CRM, Booking, Payments)" data-v-662ad707>Beauty Tech (CRM, Booking, Payments)</option><option value="Salon &amp; Clinic Equipment Suppliers" data-v-662ad707>Salon &amp; Clinic Equipment Suppliers</option><option value="other" data-v-662ad707>Other</option>',13)]),544),[[K,e.industry]])]),e.industry==="other"?(f(),g("div",me,[t[13]||(t[13]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Specify Industry",-1)),A(o("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.customIndustry=a),type:"text",required:"",placeholder:"Specify your industry",class:"w-full text-black px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black placeholder:text-gray-400"},null,512),[[P,e.customIndustry]])])):N("",!0),o("div",null,[t[14]||(t[14]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[L("Email "),o("span",{class:"text-red-500"},"*")],-1)),A(o("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>e.email=a),type:"email",placeholder:"mail@company.com",class:F(["w-full px-3 py-2 text-black border rounded-md focus:outline-none focus:ring-2 focus:ring-black placeholder:text-gray-400",m.value?"border-red-500":"border-gray-300"])},null,2),[[P,e.email]]),m.value?(f(),g("p",pe,v(m.value),1)):N("",!0)]),o("div",null,[t[15]||(t[15]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Whatsapp/Phone",-1)),A(o("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>e.phone=a),type:"tel",placeholder:"+971000000000",class:"w-full text-black px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black placeholder:text-gray-400"},null,512),[[P,e.phone]])]),o("div",null,[t[16]||(t[16]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Referral Source & Comments to Organizers",-1)),A(o("textarea",{"onUpdate:modelValue":t[5]||(t[5]=a=>e.message=a),rows:"3",class:"w-full text-black px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black placeholder:text-gray-400",placeholder:"How did you hear about us? Any additional comments..."},null,512),[[P,e.message]])]),o("div",ge,[o("label",fe,[A(o("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>e.agreement1=a),type:"checkbox",required:"",class:"mt-1 w-4 h-4 text-black bg-black border-black rounded focus:ring-black focus:ring-2"},null,512),[[z,e.agreement1]]),t[17]||(t[17]=o("span",{class:"text-sm text-gray-700"},[o("span",{class:"text-red-500"},"*"),L(" I understand that trial spots are limited and subsidized. Placement on the waitlist does not guarantee participation, and allocation will depend on availability. ")],-1))]),o("label",he,[A(o("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>e.agreement2=a),type:"checkbox",required:"",class:"mt-1 w-4 h-4 text-black bg-black border-black rounded focus:ring-black focus:ring-2"},null,512),[[z,e.agreement2]]),t[18]||(t[18]=o("span",{class:"text-sm text-gray-700"},[o("span",{class:"text-red-500"},"*"),L(" I agree that the EFW team may use my contact details to notify me about updates and opportunities. ")],-1))])]),o("button",{type:"submit",disabled:y.value||!e.companyName.trim()||!e.industry||!e.agreement1||!e.agreement2,class:"w-full bg-black text-white py-2 rounded-md hover:bg-opacity-90 transition-colors disabled:bg-gray-400"},v(y.value?"Adding to Waitlist...":"Join"),9,ye)],32))])])):N("",!0)}},Be=X(ve,[["__scopeId","data-v-662ad707"]]),xe={class:"companies-list"},be={key:0,class:"text-center py-8"},Ce={key:1,class:"text-center py-8"},we={class:"text-red-600"},Se={key:2,class:"text-center py-8"},Ae={key:3,class:"space-y-3"},ke={class:"text-lg font-semibold mb-4"},Ee={class:"space-y-3 pr-2"},Ie={class:"flex items-center gap-3 flex-1"},Te={class:"flex-shrink-0 w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center text-xs font-medium text-gray-600"},Ne={class:"flex-1"},_e={class:"flex items-center gap-2"},De={class:"font-medium text-gray-900"},Re={key:0,class:"px-2 py-1 text-xs font-semibold text-green-700 bg-green-100 rounded-full"},Le={__name:"CompaniesList",emits:["companies-count-updated"],setup(M,{expose:D,emit:C}){const e=h([]),m=h(!0),y=h(""),u=h(null),w=h(null),{updateCompaniesCount:x}=re(),W=l=>{if(!l||l.length<=2)return l;const s=l.split(" ");if(s.length===1){const t=s[0];return t.length<5?t.substring(0,2)+"*".repeat(t.length-2):t.substring(0,2)+"*".repeat(t.length-5)+t.substring(t.length-3)}else return s.map((a,i)=>i===0?a.substring(0,2)+"*".repeat(a.length-2):i===s.length-1&&a.length===3?a:"*".repeat(a.length)).join(" ")},B=l=>u.value?l.companyName+"_"+l.timestamp===u.value:!1,U=l=>{switch((l||"WAITLIST").toUpperCase()){case"GARANTEED":case"GUARANTEED":return{class:"px-2 py-1 text-xs font-semibold text-green-700 bg-green-100 rounded-full",text:"GARANTEED"};case"RECOMMENDED":case"RECOMENDED":case"RECOMМENDED":return{class:"px-2 py-1 text-xs font-semibold text-blue-700 bg-blue-100 rounded-full",text:"RECOMMENDED"};case"WAITLIST":default:return{class:"px-2 py-1 text-xs font-semibold text-orange-700 bg-orange-100 rounded-full",text:"WAITLIST"}}},R=l=>l.filter(t=>!t.status||t.status===""||t.status==="WAITLIST"||t.status==="waitlist"||t.status==="GARANTEED"||t.status==="guaranteed"||t.status==="RECOMMENDED"||t.status==="recommended"||t.status==="RECOMENDED"||t.status==="recomended"||t.status==="RECOMМENDED"||t.status==="recomмended"),_=async()=>{try{if(m.value=!0,y.value="",window.location.hostname.includes("localhost")||window.location.hostname.includes("127.0.0.1")||window.location.hostname.includes("0.0.0.0")){try{const s=await $fetch("/api/companies-list",{query:{_t:Date.now()}});if(s.success){const a=R(s.companies).sort((i,p)=>new Date(p.timestamp)-new Date(i.timestamp));if(u.value){const i=e.value.findIndex(p=>p.companyName+"_"+p.timestamp===u.value);if(i!==-1){const p=e.value.splice(i,1)[0];a.unshift(p)}}e.value=a,S("companies-count-updated",e.value.length),x(e.value.length)}else y.value=s.error||"Ошибка загрузки данных"}catch(s){console.error("API Error:",s),e.value=[],S("companies-count-updated",0),x(0),y.value="Сервис временно недоступен"}m.value=!1}else{try{const a=await fetch("https://docs.google.com/spreadsheets/d/1jGEJIU-0Cwx151O0JczBkoaUCE48j5saab-R5eKzLfM/export?format=csv&gid=0");if(!a.ok)throw new Error(`CSV export error: ${a.statusText}`);const c=(await a.text()).split(`
`).filter(n=>n.trim()).map(n=>{const d=[];let b="",I=!1;for(let T=0;T<n.length;T++){const O=n[T];O==='"'?I=!I:O===","&&!I?(d.push(b.trim()),b=""):b+=O}return d.push(b.trim()),d}).map((n,d)=>({timestamp:n[0]||"",companyName:n[1]||"",industry:n[2]||"",name:n[3]||"",email:n[4]||"",phone:n[5]||"",message:n[6]||"",agreement1:n[7]||"",agreement2:n[8]||"",ipAddress:n[9]||"",userAgent:n[10]||"",status:n[11]||"WAITLIST"})).filter(n=>n.companyName),r=R(c).sort((n,d)=>new Date(d.timestamp)-new Date(n.timestamp));if(u.value){const n=e.value.findIndex(d=>d.companyName+"_"+d.timestamp===u.value);if(n!==-1){const d=e.value.splice(n,1)[0];r.unshift(d)}}e.value=r,console.log("CompaniesList: Обновляем счетчик компаний:",e.value.length),S("companies-count-updated",e.value.length),x(e.value.length),console.log("Companies loaded from Google Sheets:",c.length)}catch(s){console.error("CSV fetch error:",s);const t=[{companyName:"Test Company 1",industry:"Fashion",timestamp:new Date().toISOString(),status:"waitlist"},{companyName:"Test Company 2",industry:"Beauty",timestamp:new Date(Date.now()-864e5).toISOString(),status:"waitlist"}];e.value=t,S("companies-count-updated",t.length),x(t.length)}m.value=!1}}catch(l){console.error("Error fetching companies:",l),y.value="Ошибка загрузки данных",m.value=!1}},H=async()=>{try{const t=await fetch("https://docs.google.com/spreadsheets/d/1jGEJIU-0Cwx151O0JczBkoaUCE48j5saab-R5eKzLfM/export?format=csv&gid=0");if(!t.ok)throw new Error(`CSV export error: ${t.statusText}`);const k=(await t.text()).split(`
`).filter(r=>r.trim()).map(r=>{const n=[];let d="",b=!1;for(let I=0;I<r.length;I++){const T=r[I];T==='"'?b=!b:T===","&&!b?(n.push(d.trim()),d=""):d+=T}return n.push(d.trim()),n}).map((r,n)=>({timestamp:r[0]||"",companyName:r[1]||"",industry:r[2]||"",name:r[3]||"",email:r[4]||"",phone:r[5]||"",message:r[6]||"",agreement1:r[7]||"",agreement2:r[8]||"",ipAddress:r[9]||"",userAgent:r[10]||"",status:r[11]||"WAITLIST"})).filter(r=>r.companyName),E=R(k).sort((r,n)=>new Date(n.timestamp)-new Date(r.timestamp));if(u.value){const r=e.value.findIndex(n=>n.companyName+"_"+n.timestamp===u.value);if(r!==-1){const n=e.value.splice(r,1)[0];E.unshift(n)}}e.value=E,console.log("CompaniesList autoRefresh: Обновляем счетчик компаний:",e.value.length),S("companies-count-updated",e.value.length),x(e.value.length)}catch(l){console.error("Error during auto refresh:",l)}};D({refresh:async(l=null)=>{if(l){const s=l.companyName+"_"+l.timestamp;u.value=s,e.value.unshift(l)}await _()},fetchCompanies:_});const S=C;return te(e,l=>{S("companies-count-updated",l.length),x(l.length)},{immediate:!0}),J(()=>{_(),w.value=ne(()=>{H()},6e4)}),se(()=>{w.value&&clearInterval(w.value)}),(l,s)=>(f(),g("div",xe,[m.value?(f(),g("div",be,s[0]||(s[0]=[o("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-black"},null,-1)]))):y.value?(f(),g("div",Ce,[o("p",we,"Loading error: "+v(y.value),1)])):e.value.length===0?(f(),g("div",Se,s[1]||(s[1]=[o("p",{class:"text-gray-600"},"No registered companies yet",-1)]))):(f(),g("div",Ae,[o("h3",ke,"COMPANIES APPLICATIONS ("+v(e.value.length)+")",1),o("div",Ee,[(f(!0),g(ae,null,oe(e.value,(t,a)=>(f(),g("div",{key:a,class:F(["flex items-center justify-between p-3 rounded-lg border transition-all duration-300",B(t)?"bg-green-50 border-green-200 shadow-md":"bg-gray-50 border-gray-200"])},[o("div",Ie,[o("div",Te,v(a+1),1),o("div",Ne,[o("div",_e,[o("div",De,v(W(t.companyName))+v(t.industry?" | "+t.industry:""),1),B(t)?(f(),g("span",Re," NEW ")):N("",!0),o("span",{class:F(U(t.status).class)},v(U(t.status).text),3)])])])],2))),128))])]))]))}},Ue=X(Le,[["__scopeId","data-v-d209f230"]]),He=""+new URL("trial.DE43NbE_.webp",import.meta.url).href,Oe=""+new URL("trial_compare.CSoTNs-R.webp",import.meta.url).href;export{Ue as C,He as I,Be as W,Oe as a,re as u};
