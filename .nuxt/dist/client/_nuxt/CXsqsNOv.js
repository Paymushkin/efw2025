import{j as u,f,k as d}from"./CshSS2sD.js";function b(i){let e=null;const r=u(!1),o=new Map,a=s=>{s.forEach(n=>{const t=n.target;t&&(r.value=n.isIntersecting,n.isIntersecting?t.play().catch(()=>{console.log("Playback failed, might need user interaction")}):t.pause())})},c=(s,n)=>{if(s)o.set(n,s),e||(e=new IntersectionObserver(a,{threshold:.5,rootMargin:"50px"})),e.observe(s);else{const t=o.get(n);t&&e&&e.unobserve(t),o.delete(n)}},l=()=>{e&&(e.disconnect(),e=null),o.clear()};return f(()=>{i?.value&&(e||(e=new IntersectionObserver(a,{threshold:.5,rootMargin:"50px"})),e.observe(i.value),i.value.play().catch(()=>{console.log("Initial playback failed, might need user interaction")}))}),d(()=>{l()}),i?{isVisible:r}:{setVideoRef:c,cleanup:l,isVisible:r}}export{b as u};
