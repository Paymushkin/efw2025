{"file":"GalleryIframe-ZcD78ytm.js","mappings":";;;;;;;;;;;;;AAoBA,UAAM,WAAW,IAAI,KAAK;AA0D1B,UAAM,UAAU,MAAM;AAAA,IAEtB,CAAC;;;QA9EG,IAAG;AAAA,QACH,OAAK,CAAC,sCAAoC,EAAA,YACpB,QAAA,SAAO;AAAA,MAAA;;;;;;;;;;;","names":[],"sources":["../../../../components/GalleryIframe.vue"],"sourcesContent":["<template>\n  <div \n    id=\"reportage\"\n    class=\"container gallery-iframe-container\"\n    :class=\"{ 'with-fog': showFog }\"\n  >\n    <div class=\"overlay\" @click=\"navigateToGallery\"></div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted, watch } from 'vue';\n\nconst props = defineProps({\n  showFog: {\n    type: Boolean,\n    default: true\n  },\n});\n\nconst isMobile = ref(false);\n\nconst checkMobile = () => {\n  if (process.client) {\n    isMobile.value = window.innerWidth < 768;\n  }\n};\n\nconst updateScript = () => {\n  if (!process.client) return;\n  \n  const reportageBlock = document.getElementById('reportage');\n  if (!reportageBlock) return;\n\n  // Удаляем только старые iframe и скрипты Meyou\n  reportageBlock.querySelectorAll('iframe').forEach(el => el.remove());\n  reportageBlock.querySelectorAll('script[data-meyou]').forEach(el => el.remove());\n\n  setTimeout(() => {\n    const script = document.createElement('script');\n    script.src = 'https://meyou.id/public/meyou_init.js?v=1.0.0';\n    script.id = 'meyou_init';\n    script.setAttribute('data-meyou', '1'); // для поиска и удаления\n    // Передаём стартовую высоту, чтобы iframe не был 0px\n    // script.setAttribute('data-height', isMobile.value ? '350px' : '500px');\n\n    const params = isMobile.value \n      ? 'UTM=smi&header&footer&tag&count=8&nobutton&size=100&noclick&pages'\n      : 'UTM=smi&header&footer&tag&count=24&nobutton&size=150&noclick&pages';\n\n    script.setAttribute(\n      'data-event',\n      `https://meyou.id/efwss26/live?${params}`\n      // `https://meyou.id/efw2025/live?${params}`\n    );\n\n    reportageBlock.appendChild(script);\n  }, 100);\n\n};\n\nfunction handleMeyouMessage(event) {\n  // Проверяем, что event.data существует\n  if (!event.data) return;\n  \n  // Проверяем, что event.data это строка или может быть преобразовано в строку\n  if (typeof event.data !== 'string') {\n    // Игнорируем не-строковые данные (например, объекты от других расширений)\n    return;\n  }\n  \n  // Проверяем наличие подстроки безопасным способом\n  if (event.data.includes('meyouHeight')) {\n    // Обработка события meyou\n    console.log('Meyou height message received');\n  }\n}\n\nwatch(isMobile, () => {\n  updateScript();\n});\n\nonMounted(() => {\n  if (process.client) {\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    window.addEventListener('message', handleMeyouMessage);\n    setTimeout(updateScript, 100);\n  }\n});\n\nonUnmounted(() => {\n  if (process.client) {\n    window.removeEventListener('resize', checkMobile);\n    window.removeEventListener('message', handleMeyouMessage);\n  }\n});\n\nconst navigateToGallery = () => {\n  if (process.client) {\n    window.location.href = '/gallery-ss-26';\n  }\n};\n</script>\n\n<style scoped>\n.gallery-iframe-container {\n  width: 100%;\n  overflow: hidden;\n  margin-bottom: 2.5rem;\n  position: relative;\n  min-height: 300px;\n}\n\n@media (min-width: 768px) {\n  .gallery-iframe-container {\n    margin-bottom: 4.75rem;\n  }\n}\n\n.overlay {\n  position: absolute;\n  inset: 0;\n  cursor: pointer;\n  z-index: 1;\n}\n\n.gallery-iframe-container.with-fog::after {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 60px;\n  background: linear-gradient(to bottom, \n    rgba(255, 255, 255, 0) 0%,\n    rgba(255, 255, 255, 0.1) 20%,\n    rgba(255, 255, 255, 0.3) 40%,\n    rgba(255, 255, 255, 0.6) 60%,\n    rgba(255, 255, 255, 0.8) 80%,\n    rgba(255, 255, 255, 1) 100%\n  );\n  pointer-events: none;\n  z-index: 2;\n}\n\n@media (min-width: 768px) {\n  .gallery-iframe-container.with-fog::after {\n    height: 100px;\n  }\n}\n</style> "],"version":3}